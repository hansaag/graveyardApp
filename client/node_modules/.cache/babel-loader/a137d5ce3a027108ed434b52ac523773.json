{"ast":null,"code":"var _jsxFileName = \"/Users/Hansi/Desktop/gardener/client/src/components/ProjectInfo.js\";\nimport React, { useState, useContext, Fragment, useEffect } from \"react\";\nimport { GlobalContext } from \"../contexts/GlobalContext\";\nimport { GlobalEdit } from \"../contexts/GlobalEdit\";\nimport JsonActivities, { cleanComments } from \"../utilities/JsonActivities\";\nimport { ProjectContext } from \"../contexts/ProjectContext\";\nimport { ProgressBar } from \"./ProgressBar\";\n\nconst ProjectInfo = () => {\n  let newComment;\n  const {\n    value,\n    setValue\n  } = useContext(GlobalContext);\n  const {\n    viewProject,\n    setViewProject\n  } = useContext(ProjectContext);\n  const [commentsRendered, setCommentsRendered] = useState([]);\n  const [newlyAddedComment, setNewlyAddedComment] = useState(false);\n  const [input, setInput] = useState(false);\n\n  const registerInput = e => {\n    console.log(e.target.value);\n\n    if (e.target.value == \"\") {\n      setInput(false);\n    } else setInput(true);\n  };\n\n  let id = value.gy.id;\n  let dummyPercent = 0;\n\n  const renderComments = arr => {\n    let fetchedComments = arr.map(it => {\n      let dateEntry = it[\"added\"].substring(8, 10) + \".\" + it[\"added\"].substring(5, 7);\n      return /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 9\n        }\n      }, \"- \\xA0 \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"comment-date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 21\n        }\n      }, dateEntry), \": \\xA0\", it[\"comment\"]));\n    });\n    console.log(fetchedComments);\n    setCommentsRendered(fetchedComments);\n  };\n\n  const getComments = async () => {\n    try {\n      await fetch(`http://138.68.88.7:5000/comments/${id}/${viewProject[\"project_id\"]}`).then(res => res.json()).then(json => renderComments(json));\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const addComment = async () => {\n    newComment = document.getElementById(\"project-textarea\").value;\n    console.log(newComment.length);\n    if (newComment.length < 5) return;\n    let ser = viewProject.project_id;\n\n    try {\n      const body = {\n        id,\n        ser,\n        newComment\n      };\n      console.log(body);\n      const response = await fetch(`http://138.68.88.7:5000/comments`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      });\n      document.getElementById(\"project-textarea\").value = null;\n      setNewlyAddedComment(true);\n      setInput(false);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  useEffect(() => {\n    setCommentsRendered([]);\n    getComments();\n  }, [viewProject]);\n  useEffect(() => {\n    getComments();\n    setNewlyAddedComment(false);\n  }, [newlyAddedComment]);\n\n  if (viewProject) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-info-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-title-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, viewProject.project_title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-visual-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-prio-visual\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, \"P\", viewProject.project_prio))), /*#__PURE__*/React.createElement(ProgressBar, {\n      done: dummyPercent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-descr-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"project-description-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }, \"Tilleggsinformasjon\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"project-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }, viewProject.project_descr)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-completion-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment-list-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"comment-list-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, \"Kommentarer\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"comment-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, commentsRendered), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment-input-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"comment-textarea\",\n      id: \"project-textarea\",\n      placeholder: \"Skriv en kommentar\",\n      onChange: e => registerInput(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: `add-comment-button ${input ? 'show' : ''}`,\n      id: \"submit-comment\",\n      onClick: addComment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, \"+\"))));\n  } else return null;\n};\n\nexport default ProjectInfo;","map":{"version":3,"sources":["/Users/Hansi/Desktop/gardener/client/src/components/ProjectInfo.js"],"names":["React","useState","useContext","Fragment","useEffect","GlobalContext","GlobalEdit","JsonActivities","cleanComments","ProjectContext","ProgressBar","ProjectInfo","newComment","value","setValue","viewProject","setViewProject","commentsRendered","setCommentsRendered","newlyAddedComment","setNewlyAddedComment","input","setInput","registerInput","e","console","log","target","id","gy","dummyPercent","renderComments","arr","fetchedComments","map","it","dateEntry","substring","getComments","fetch","then","res","json","err","error","message","addComment","document","getElementById","length","ser","project_id","body","response","method","headers","JSON","stringify","project_title","project_prio","project_descr"],"mappings":"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","sourcesContent":["import React, { useState, useContext, Fragment, useEffect } from \"react\";\n\nimport { GlobalContext } from \"../contexts/GlobalContext\";\nimport { GlobalEdit } from \"../contexts/GlobalEdit\";\n\nimport JsonActivities, { cleanComments } from \"../utilities/JsonActivities\";\nimport { ProjectContext } from \"../contexts/ProjectContext\";\nimport {ProgressBar} from \"./ProgressBar\";\n\nconst ProjectInfo = () => {\n  let newComment;\n  const { value, setValue } = useContext(GlobalContext);\n  const { viewProject, setViewProject } = useContext(ProjectContext);\n  const [commentsRendered, setCommentsRendered] = useState([]);\n  const [newlyAddedComment, setNewlyAddedComment] = useState(false);\n  const [input, setInput] = useState(false);\n\n  const registerInput = (e) => {\n    console.log(e.target.value);\n    if (e.target.value == \"\"){\n      setInput(false);\n    } else setInput(true)\n  }\n\n  let id = value.gy.id;\n  let dummyPercent = 0;\n\n  const renderComments = (arr) => {\n    let fetchedComments = arr.map((it) => {\n      let dateEntry = it[\"added\"].substring(8,10) + \".\" + it[\"added\"].substring(5,7);\n      return(\n      <li>\n        <p>- &nbsp; <span className=\"comment-date\">{dateEntry}</span>: &nbsp;{it[\"comment\"]}</p>\n      </li>)\n    });\n    console.log(fetchedComments);\n    setCommentsRendered(fetchedComments);\n  };\n  const getComments = async () => {\n    try {\n      await fetch(`http://138.68.88.7:5000/comments/${id}/${viewProject[\"project_id\"]}`)\n        .then((res) => res.json())\n        .then((json) => renderComments(json));\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const addComment = async () => {\n    newComment = document.getElementById(\"project-textarea\").value;\n    console.log(newComment.length);\n    if (newComment.length < 5) return;\n    let ser = viewProject.project_id;\n    try {\n      const body = {\n        id,\n        ser,\n        newComment,\n      };\n      console.log(body);\n      const response = await fetch(`http://138.68.88.7:5000/comments`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(body),\n      });\n      document.getElementById(\"project-textarea\").value = null;\n      setNewlyAddedComment(true);\n      setInput(false);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  useEffect(() => {\n    setCommentsRendered([]);\n    getComments();\n  }, [viewProject])\n\n  useEffect(() => {\n    getComments();\n    setNewlyAddedComment(false);\n  }, [newlyAddedComment])\n\n  if (viewProject) {\n    return (\n      <div className=\"project-info-container\">\n        <div className=\"project-title-container\">\n          <p>{viewProject.project_title}</p>\n          <div className=\"project-visual-info\">\n            <div className=\"project-prio-visual\">P{viewProject.project_prio}</div>\n          </div>\n        </div>\n        <ProgressBar done={dummyPercent} />\n\n        <div className=\"project-descr-container\">\n          <p className=\"project-description-header\">Tilleggsinformasjon</p>\n          <p className=\"project-description\">{viewProject.project_descr}</p>\n        </div>\n        <div className=\"project-completion-container\"></div>\n        <div className=\"comment-list-container\">\n          <p className=\"comment-list-header\">Kommentarer</p>\n          <ul className=\"comment-list\">{commentsRendered}</ul>\n          <div className =\"comment-input-container\">\n            <textarea\n              className=\"comment-textarea\"\n              id=\"project-textarea\"\n              placeholder=\"Skriv en kommentar\"\n              onChange={ e => registerInput(e)}\n            ></textarea>\n          <div className={`add-comment-button ${input? 'show' : ''}`} id=\"submit-comment\" onClick={addComment}>+</div>\n\n          </div>\n        </div>\n      </div>\n    );\n  } else return null;\n};\n\nexport default ProjectInfo;\n"]},"metadata":{},"sourceType":"module"}