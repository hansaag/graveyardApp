{"ast":null,"code":"var _jsxFileName = \"/Users/Hansi/Desktop/gardener/client/src/components/ProjectInfo.js\";\nimport React, { useState, useContext, Fragment, useEffect } from \"react\";\nimport { GlobalContext } from \"../contexts/GlobalContext\";\nimport { GlobalEdit } from \"../contexts/GlobalEdit\";\nimport JsonActivities, { cleanComments } from \"../utilities/JsonActivities\";\nimport { ProjectContext } from \"../contexts/ProjectContext\";\nimport { ProgressBar } from \"./ProgressBar\";\n\nconst ProjectInfo = () => {\n  let newComment;\n  const {\n    value,\n    setValue\n  } = useContext(GlobalContext);\n  const {\n    viewProject,\n    setViewProject\n  } = useContext(ProjectContext);\n  const [commentsRendered, setCommentsRendered] = useState([]);\n  const [newlyAddedComment, setNewlyAddedComment] = useState(false);\n  const [input, setInput] = useState(false);\n\n  const registerInput = e => {\n    console.log(e.target.value);\n\n    if (e.target.value.length < 5) {\n      setInput(false);\n    } else setInput(true);\n  };\n\n  let id = value.gy.id;\n\n  const renderComments = arr => {\n    let fetchedComments = arr.map(it => {\n      let dateEntry = it[\"added\"].substring(8, 10) + \".\" + it[\"added\"].substring(5, 7);\n      return /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 21\n        }\n      }, \"- \\xA0\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"comment-date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 25\n        }\n      }, dateEntry), \": \\xA0\", it[\"comment\"]));\n    });\n    console.log(fetchedComments);\n    setCommentsRendered(fetchedComments);\n  };\n\n  const getComments = async () => {\n    try {\n      await fetch(`http://138.68.88.7:5000/comments/${id}/${viewProject[\"project_id\"]}`).then(res => res.json()).then(json => renderComments(json));\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const addComment = async () => {\n    newComment = document.getElementById(\"project-textarea\").value;\n    console.log(newComment.length);\n    if (newComment.length < 5) return;\n    let ser = viewProject.project_id;\n\n    try {\n      const body = {\n        id,\n        ser,\n        newComment\n      };\n      console.log(body);\n      const response = await fetch(`http://138.68.88.7:5000/comments`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      });\n      document.getElementById(\"project-textarea\").value = null;\n      setNewlyAddedComment(true);\n      setInput(false);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  useEffect(() => {\n    setCommentsRendered([]);\n    getComments();\n  }, [viewProject]);\n  useEffect(() => {\n    getComments();\n    setNewlyAddedComment(false);\n  }, [newlyAddedComment]);\n\n  if (viewProject) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-info-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-title-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-visual-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-prio-visual\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 25\n      }\n    }, \"P\", viewProject.project_prio)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, viewProject.project_title)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"progress-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ProgressBar, {\n      done: viewProject.percent_finished,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"progress-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, \"+\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-descr-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"project-description-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, \"Tilleggsinformasjon\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"project-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }, viewProject.project_descr)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-completion-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment-list-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"comment-list-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \"Kommentarer\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"comment-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }, commentsRendered), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment-input-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"comment-textarea\",\n      id: \"project-textarea\",\n      placeholder: \"Skriv en kommentar \\\\n\\\\ (minst 5 tegn)\",\n      onChange: e => registerInput(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: `add-comment-button ${input ? \"show\" : \"\"}`,\n      id: \"submit-comment\",\n      onClick: addComment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, \"+\"))));\n  } else return null;\n};\n\nexport default ProjectInfo;","map":{"version":3,"sources":["/Users/Hansi/Desktop/gardener/client/src/components/ProjectInfo.js"],"names":["React","useState","useContext","Fragment","useEffect","GlobalContext","GlobalEdit","JsonActivities","cleanComments","ProjectContext","ProgressBar","ProjectInfo","newComment","value","setValue","viewProject","setViewProject","commentsRendered","setCommentsRendered","newlyAddedComment","setNewlyAddedComment","input","setInput","registerInput","e","console","log","target","length","id","gy","renderComments","arr","fetchedComments","map","it","dateEntry","substring","getComments","fetch","then","res","json","err","error","message","addComment","document","getElementById","ser","project_id","body","response","method","headers","JSON","stringify","project_prio","project_title","percent_finished","project_descr"],"mappings":"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","sourcesContent":["import React, { useState, useContext, Fragment, useEffect } from \"react\";\n\nimport { GlobalContext } from \"../contexts/GlobalContext\";\nimport { GlobalEdit } from \"../contexts/GlobalEdit\";\n\nimport JsonActivities, { cleanComments } from \"../utilities/JsonActivities\";\nimport { ProjectContext } from \"../contexts/ProjectContext\";\nimport { ProgressBar } from \"./ProgressBar\";\n\nconst ProjectInfo = () => {\n    let newComment;\n    const { value, setValue } = useContext(GlobalContext);\n    const { viewProject, setViewProject } = useContext(ProjectContext);\n    const [commentsRendered, setCommentsRendered] = useState([]);\n    const [newlyAddedComment, setNewlyAddedComment] = useState(false);\n    const [input, setInput] = useState(false);\n\n    const registerInput = (e) => {\n        console.log(e.target.value);\n        if (e.target.value.length < 5) {\n            setInput(false);\n        } else setInput(true);\n    };\n\n    let id = value.gy.id;\n\n    const renderComments = (arr) => {\n        let fetchedComments = arr.map((it) => {\n            let dateEntry =\n                it[\"added\"].substring(8, 10) +\n                \".\" +\n                it[\"added\"].substring(5, 7);\n            return (\n                <li>\n                    <p>\n                        - &nbsp;{\" \"}\n                        <span className=\"comment-date\">{dateEntry}</span>:\n                        &nbsp;{it[\"comment\"]}\n                    </p>\n                </li>\n            );\n        });\n        console.log(fetchedComments);\n        setCommentsRendered(fetchedComments);\n    };\n    const getComments = async () => {\n        try {\n            await fetch(\n                `http://138.68.88.7:5000/comments/${id}/${viewProject[\"project_id\"]}`\n            )\n                .then((res) => res.json())\n                .then((json) => renderComments(json));\n        } catch (err) {\n            console.error(err.message);\n        }\n    };\n\n    const addComment = async () => {\n        newComment = document.getElementById(\"project-textarea\").value;\n        console.log(newComment.length);\n        if (newComment.length < 5) return;\n        let ser = viewProject.project_id;\n        try {\n            const body = {\n                id,\n                ser,\n                newComment,\n            };\n            console.log(body);\n            const response = await fetch(`http://138.68.88.7:5000/comments`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(body),\n            });\n            document.getElementById(\"project-textarea\").value = null;\n            setNewlyAddedComment(true);\n            setInput(false);\n        } catch (err) {\n            console.error(err.message);\n        }\n    };\n\n    useEffect(() => {\n        setCommentsRendered([]);\n        getComments();\n    }, [viewProject]);\n\n    useEffect(() => {\n        getComments();\n        setNewlyAddedComment(false);\n    }, [newlyAddedComment]);\n\n    if (viewProject) {\n        return (\n            <div className=\"project-info-container\">\n                <div className=\"project-title-container\">\n                    <div className=\"project-visual-info\">\n                        <div className=\"project-prio-visual\">\n                            P{viewProject.project_prio}\n                        </div>\n                    </div>\n                    <p>{viewProject.project_title}</p>\n                </div>\n                <div className=\"progress-box\">\n                    <ProgressBar done={viewProject.percent_finished} />\n                    <div className=\"progress-input\">+</div>\n                </div>\n\n                <div className=\"project-descr-container\">\n                    <p className=\"project-description-header\">\n                        Tilleggsinformasjon\n                    </p>\n                    <p className=\"project-description\">\n                        {viewProject.project_descr}\n                    </p>\n                </div>\n                <div className=\"project-completion-container\"></div>\n                <div className=\"comment-list-container\">\n                    <p className=\"comment-list-header\">Kommentarer</p>\n                    <ul className=\"comment-list\">{commentsRendered}</ul>\n                    <div className=\"comment-input-container\">\n                        <textarea\n                            className=\"comment-textarea\"\n                            id=\"project-textarea\"\n                            placeholder=\"Skriv en kommentar \\n\\ (minst 5 tegn)\"\n                            onChange={(e) => registerInput(e)}\n                        ></textarea>\n                        <div\n                            className={`add-comment-button ${\n                                input ? \"show\" : \"\"\n                            }`}\n                            id=\"submit-comment\"\n                            onClick={addComment}\n                        >\n                            +\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    } else return null;\n};\n\nexport default ProjectInfo;\n"]},"metadata":{},"sourceType":"module"}